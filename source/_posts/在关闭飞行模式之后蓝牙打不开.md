---
title: 在关闭飞行模式之后蓝牙打不开
date: 2017-09-22 10:47:44
tags:
---
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/toolbar/QuickSettingsConnectionModel.java
``` Java
mBluetoothTileView.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        String toggleableRadio = Settings.Global.getString(mContext.getContentResolver(),Settings.Global.AIRPLANE_MODE_TOGGLEABLE_RADIOS);
        boolean isAirplaneToggleable = toggleableRadio == null ? false : toggleableRadio.contains(Settings.Global.RADIO_BLUETOOTH);
        boolean isAirplaneModeOn = Settings.Global.getInt(mContext.getContentResolver(),Settings.Global.AIRPLANE_MODE_ON,0) == 1;
        if(!isAirplaneModeOn || isAirplaneToggleable){
            mBluetoothStateTracker.toggleState(mContext);
        }
    }
});
```